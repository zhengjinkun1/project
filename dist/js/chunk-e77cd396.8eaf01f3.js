(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e77cd396"],{5652:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("van-nav-bar",{staticClass:"nav",attrs:{title:"搜索","left-text":"返回","left-arrow":""}}),s("div",{staticClass:"search-inp"},[s("van-search",{attrs:{shape:"round",background:"#fff","show-action":"",placeholder:"请输入搜索关键词"},on:{search:function(e){return t.onSearch(t.keyword)},input:function(e){return t.suggest(t.keyword)},clear:t.toggle},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:function(e){return t.onSearch(t.keyword)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t.isShow?s("div",[s("div",{staticClass:"hotAdvice"},[s("div",{staticClass:"advice-title-box clearfix"},[t._m(0),s("div",{staticClass:"fr advice-fr",on:{click:t.changeList}},[s("div",{staticClass:"fl"},[t._v("换一批")]),s("div",{staticClass:"advice-icon fl"},[s("van-icon",{attrs:{name:"replay",size:"12px"}})],1)])]),s("div",{staticClass:"advice-box"},[s("ul",{staticClass:"advice-box-item clearfix"},t._l(t.someHotWordData,(function(e,a){return s("li",{key:a,staticClass:"advice-list fl",on:{click:function(s){return t.goResult(e.word)}}},[t._v(t._s(e.word))])})),0)])]),s("div",{staticClass:"search-history clearfix"},[s("div",{staticClass:"history-title-box clearfix"},[t._m(1),s("div",{staticClass:"fr history-fr clearfix",on:{click:t.removeHistory}},[s("div",{staticClass:"fl"},[t._v("删除历史")]),s("div",{staticClass:"advice-icon fl"},[s("van-icon",{attrs:{name:"delete",size:"14px"}})],1)])]),s("div",{staticClass:"history-list"},[s("ul",t._l(t.historyData,(function(e,a){return s("li",{key:a,staticClass:"list-item",on:{click:function(s){return t.goResult(e)}}},[t._v(t._s(e))])})),0)])])]):s("div",{staticClass:"searchAdvice"},[s("ul",t._l(t.suggestData,(function(e,a){return s("li",{key:a,staticClass:"s-box",on:{click:function(s){return t.goResult(e.title)}}},[s("span",{staticClass:"s-icon"},[s("van-icon",{attrs:{name:"orders-o"}})],1),s("span",{staticClass:"s-content"},[t._v(t._s(e.title))])])})),0)])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"advice-title fl"},[s("h1",[t._v("热门推荐")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history-title fl"},[s("h1",[t._v("搜索历史")])])}],o=(s("fb6a"),s("a434"),{data:function(){return{keyword:"",allHotWordData:[],someHotWordData:[],start:0,end:6,isShow:!0,historyData:[],suggestData:[]}},created:function(){this.historyData=this.$store.state.word,this.getHotWord(0,6)},methods:{getHotWord:function(t,e){var s=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"http://novel.kele8.cn/search-hotwords"}).then((function(a){s.$toast.clear(),s.allHotWordData=a.data.searchHotWords,s.someHotWordData=s.allHotWordData.slice(t,e)})).catch((function(t){s.$toast.clear()}))},changeList:function(){this.someHotWordData=[],this.end>=this.allHotWordData.length?(this.start=0,this.end=6):(this.start+=6,this.end+=6),this.someHotWordData=this.allHotWordData.slice(this.start,this.end)},onSearch:function(t){var e=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"http://novel.kele8.cn/search",params:{keyword:t}}).then((function(s){e.$toast.clear(),e.changeWord(e.keyword),e.$router.push({name:"Result",query:{keyword:t}})})).catch((function(t){e.$toast.clear()}))},removeHistory:function(){this.$store.commit("remove"),this.historyData.splice(0,this.historyData.length)},suggest:function(t){var e=this;this.isShow&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"http://novel.kele8.cn/search",params:{keyword:t}}).then((function(t){e.$toast.clear(),e.suggestData=t.data.books.slice(0,20),e.isShow=!1})).catch((function(t){e.$toast.clear()})))},toggle:function(){this.isShow=!0},changeWord:function(t){this.$store.commit("change",t)},goResult:function(t){this.$router.push({name:"Result",query:{keyword:t}})}}}),r=o,n=(s("a2f9"),s("2877")),c=Object(n["a"])(r,a,i,!1,null,"1f2ee4be",null);e["default"]=c.exports},"65f0":function(t,e,s){var a=s("861d"),i=s("e8b5"),o=s("b622"),r=o("species");t.exports=function(t,e){var s;return i(t)&&(s=t.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)?a(s)&&(s=s[r],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===e?0:e)}},a2f9:function(t,e,s){"use strict";var a=s("d82e"),i=s.n(a);i.a},a434:function(t,e,s){"use strict";var a=s("23e7"),i=s("23cb"),o=s("a691"),r=s("50c4"),n=s("7b0b"),c=s("65f0"),l=s("8418"),d=s("1dde"),h=s("ae40"),u=d("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min,m=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u||!f},{splice:function(t,e){var s,a,d,h,u,f,p=n(this),k=r(p.length),w=i(t,k),C=arguments.length;if(0===C?s=a=0:1===C?(s=0,a=k-w):(s=C-2,a=g(v(o(e),0),k-w)),k+s-a>m)throw TypeError(y);for(d=c(p,a),h=0;h<a;h++)u=w+h,u in p&&l(d,h,p[u]);if(d.length=a,s<a){for(h=w;h<k-a;h++)u=h+a,f=h+s,u in p?p[f]=p[u]:delete p[f];for(h=k;h>k-a+s;h--)delete p[h-1]}else if(s>a)for(h=k-a;h>w;h--)u=h+a-1,f=h+s-1,u in p?p[f]=p[u]:delete p[f];for(h=0;h<s;h++)p[h+w]=arguments[h+2];return p.length=k-a+s,d}})},d82e:function(t,e,s){}}]);
//# sourceMappingURL=chunk-e77cd396.8eaf01f3.js.map